# üéâ OAuth –ü–æ–ª–Ω–æ—Å—Ç—å—é –†–∞–±–æ—Ç–∞–µ—Ç!

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:

### 1. **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –≤ UserProfile.tsx**
- **–ü—Ä–æ–±–ª–µ–º–∞**: Optional chaining `user.first_name?.[0]` –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º
- **–†–µ—à–µ–Ω–∏–µ**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–ª –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å —è–≤–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ `getUserInitial()` –∏ `getUserFullName()`

### 2. **Auth Service –Ω–µ –∑–∞–ø—É—Å–∫–∞–ª—Å—è**
- **–ü—Ä–æ–±–ª–µ–º–∞**: Django –Ω–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–æ
- **–†–µ—à–µ–Ω–∏–µ**: 
  - –°–æ–∑–¥–∞–ª `venv`
  - –£—Å—Ç–∞–Ω–æ–≤–∏–ª –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ `requirements.txt`
  - –ó–∞–ø—É—Å—Ç–∏–ª —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –ø–æ—Å–ª–µ Google OAuth**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –†–µ–¥–∏—Ä–µ–∫—Ç —à–µ–ª –Ω–∞ —Å—Ç–∞—Ä—ã–π –ø–æ—Ä—Ç `localhost:3005`
- **–†–µ—à–µ–Ω–∏–µ**: –£—Å—Ç–∞–Ω–æ–≤–∏–ª `MARKETPLACE_URL=http://localhost:4205`

### 4. **–ö—ç—à–∏ –º–µ—à–∞–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—é**
- **–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å –≤ –∫—ç—à–µ
- **–†–µ—à–µ–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞:
  - `.nx/cache`
  - `marketplace/.next`
  - `libs/shared/ui/.next`
  - `libs/shared/ui/dist`
  - `node_modules/.cache`

---

## üöÄ –ß—Ç–æ —Å–µ–π—á–∞—Å –∑–∞–ø—É—â–µ–Ω–æ:

| –°–µ—Ä–≤–∏—Å | –ü–æ—Ä—Ç | –°—Ç–∞—Ç—É—Å |
|--------|------|--------|
| Auth Service | 8001 | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| Marketplace | 4205 | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |
| Test Server | 3000 | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ |

---

## üß™ –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å OAuth:

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç–µ—Ä (–†–ï–ö–û–ú–ï–ù–î–£–Æ!)

1. **–û—Ç–∫—Ä–æ–π**: http://localhost:3000/test-simple.html
2. **–ù–∞–∂–º–∏**: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Auth Service" ‚Üí –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ‚úÖ
3. **–ù–∞–∂–º–∏**: "–í–æ–π—Ç–∏ —Å Google"
4. **–í—ã–±–µ—Ä–∏ –∞–∫–∫–∞—É–Ω—Ç** –≤ Google OAuth
5. **–¢–µ–±—è —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç** –Ω–∞ `http://localhost:4205/?login=success`
6. **–í–µ—Ä–Ω–∏—Å—å** –Ω–∞ http://localhost:3000/test-simple.html
7. **–ù–∞–∂–º–∏**: "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å" ‚Üí —É–≤–∏–¥–∏—à—å —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ!

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ù–∞ —Ä–µ–∞–ª—å–Ω–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

1. **–û—Ç–∫—Ä–æ–π**: http://localhost:4205 (Marketplace)
2. **–ù–∞–∂–º–∏**: "Login" –≤ —à–∞–ø–∫–µ
3. **–í—ã–±–µ—Ä–∏ –∞–∫–∫–∞—É–Ω—Ç** Google
4. **–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞** –ø–µ—Ä–µ–π–¥–∏ –Ω–∞: http://localhost:4205/profile
5. **–£–≤–∏–¥–∏—à—å** –∫—Ä–∞—Å–∏–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å —Å —Ç–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏!

---

## üìù –í–∞–∂–Ω—ã–µ URL:

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | URL |
|------------|-----|
| **–¢–µ—Å—Ç–µ—Ä OAuth** | http://localhost:3000/test-simple.html |
| **Auth Service API** | http://localhost:8001 |
| **Marketplace** | http://localhost:4205 |
| **–ü—Ä–æ—Ñ–∏–ª—å** | http://localhost:4205/profile |

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è Auth Service:
```bash
MARKETPLACE_URL=http://localhost:4205
GOOGLE_CLIENT_ID=YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com
GOOGLE_REDIRECT_URI=http://localhost:8001/api/accounts/google/callback/
DEBUG=True
```

### –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ OAuth:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç "Login"
2. –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç `GET /api/accounts/google/`
3. Auth Service –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `auth_url` –æ—Ç Google
4. –§—Ä–æ–Ω—Ç–µ–Ω–¥ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ Google OAuth
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∞–∫–∫–∞—É–Ω—Ç
6. Google —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ `http://localhost:8001/api/accounts/google/callback/?code=...`
7. Auth Service:
   - –û–±–º–µ–Ω–∏–≤–∞–µ—Ç `code` –Ω–∞ `access_token`
   - –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç Google
   - –°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
   - –õ–æ–≥–∏–Ω–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å–æ–∑–¥–∞–µ—Ç Django session)
   - –†–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç –Ω–∞ `http://localhost:4205/?login=success`
8. Cookie —Å session_id —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö `localhost:*` (SSO)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

### 1. –ü—Ä–æ–≤–µ—Ä—å OAuth –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:
```
http://localhost:3000/test-simple.html
```

### 2. –ó–∞–ø—É—Å—Ç–∏ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ SSO:
```bash
cd tyrian-monorepo
npx nx serve ai-assistant --port 4201 &
npx nx serve live-streaming --port 4202 &
npx nx serve cryptocurrency --port 4203 &
npx nx serve social-network --port 4204 &
npx nx serve stocks --port 4206 &
```

### 3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö:
- –í–æ–π–¥–∏ —á–µ—Ä–µ–∑ Marketplace
- –û—Ç–∫—Ä–æ–π –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- –ü–µ—Ä–µ–π–¥–∏ –Ω–∞ `/profile` - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–∂–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω!

---

## üêõ –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –ü—Ä–æ–±–ª–µ–º–∞: Auth Service –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
**–†–µ—à–µ–Ω–∏–µ**:
```bash
cd "/Users/devidanderson/Downloads/–†–µ–∑–µ—Ä–≤ –ì–∏—Ç–•–∞–±/3 –æ–∫—Ç—è–±—Ä—è axa –≤—Ä–µ–º—è–Ω–∫–∞ 2/AXA-auth-server-main/auth-core"
source venv/bin/activate
export MARKETPLACE_URL="http://localhost:4205"
export GOOGLE_CLIENT_ID="YOUR_GOOGLE_CLIENT_ID.apps.googleusercontent.com"
export GOOGLE_REDIRECT_URI="http://localhost:8001/api/accounts/google/callback/"
python manage.py runserver 8001
```

### –ü—Ä–æ–±–ª–µ–º–∞: Marketplace –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ**:
```bash
cd "/Users/devidanderson/Downloads/–†–µ–∑–µ—Ä–≤ –ì–∏—Ç–•–∞–±/3 –æ–∫—Ç—è–±—Ä—è axa –≤—Ä–µ–º—è–Ω–∫–∞ 2/tyrian-monorepo"
rm -rf marketplace/.next .nx/cache
npx nx serve marketplace --port 4205
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Å–ª–µ OAuth —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π `MARKETPLACE_URL` –≤ Auth Service  
**–†–µ—à–µ–Ω–∏–µ**: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ Auth Service —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (—Å–º. –≤—ã—à–µ)

---

## ‚úÖ –ò—Ç–æ–≥:

üéâ **OAuth –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç!**  
üéâ **–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã!**  
üéâ **–ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å!**

**–ü–æ–ø—Ä–æ–±—É–π —Å–µ–π—á–∞—Å**: http://localhost:3000/test-simple.html

