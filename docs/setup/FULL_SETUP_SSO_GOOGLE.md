# üöÄ –ü–æ–ª–Ω–∞—è –ù–∞—Å—Ç—Ä–æ–π–∫–∞: SSO + Google OAuth + –î–æ—Å—Ç—É–ø –∏–∑ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

**–¶–µ–ª—å:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å Google OAuth, SSO –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ –∏ –¥–æ—Å—Ç—É–ø –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —á–µ—Ä–µ–∑ ngrok.

---

## üìã –ß–¢–û –ú–´ –ü–û–õ–£–ß–ò–ú –í –ò–¢–û–ì–ï:

‚úÖ **–ï–¥–∏–Ω—ã–π –≤—Ö–æ–¥ (SSO)** - –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –æ–¥–∏–Ω —Ä–∞–∑, —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–∞—Ö  
‚úÖ **Google OAuth** - "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"  
‚úÖ **–õ–æ–∫–∞–ª—å–Ω—ã–µ –¥–æ–º–µ–Ω—ã** - axa.local, social.axa.local –∏ —Ç.–¥.  
‚úÖ **–î–æ—Å—Ç—É–ø –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞** - –¥—Ä—É–≥ –º–æ–∂–µ—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ ngrok  
‚úÖ **Cookie —Ä–∞–±–æ—Ç–∞—é—Ç** –º–µ–∂–¥—É –≤—Å–µ–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏  

---

## üéØ –ß–∞—Å—Ç—å 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –õ–æ–∫–∞–ª—å–Ω—ã—Ö –î–æ–º–µ–Ω–æ–≤ (SSO)

### –®–∞–≥ 1.1: –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω—ã –≤ /etc/hosts

**–í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**

```bash
sudo bash -c 'cat >> /etc/hosts << EOF
# AXA Platform Local
127.0.0.1 axa.local
127.0.0.1 social.axa.local
127.0.0.1 stocks.axa.local
127.0.0.1 crypto.axa.local
127.0.0.1 ai.axa.local
EOF'
```

**–ü–∞—Ä–æ–ª—å:** –í–∞—à –ø–∞—Ä–æ–ª—å –æ—Ç Mac

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ping axa.local
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å 127.0.0.1
```

### –®–∞–≥ 1.2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Nginx

```bash
brew services restart nginx
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
curl -I http://axa.local:8090
# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å 200 –∏–ª–∏ 304
```

### –®–∞–≥ 1.3: –û–±–Ω–æ–≤–∏—Ç—å ProductsSidebar –≤–æ –≤—Å–µ—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞—Ö

–ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å URL –≤ Sidebar –Ω–∞ –Ω–æ–≤—ã–µ –¥–æ–º–µ–Ω—ã —Å –ø–æ—Ä—Ç–∞–º–∏:

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `AXA-marketplace-main/src/components/ProductsSidebar/ProductsSidebar.tsx`
- `AXA-socialweb-frontend-main/src/components/ProductsSidebar/ProductsSidebar.tsx`
- `AXA-stocks-frontend-main/src/components/ProductsSidebar/ProductsSidebar.tsx`
- `AXA-coinmarketcap-main/src/components/ProductsSidebar/ProductsSidebar.tsx`
- `AXA-Turian-AI-profiles-main/src/components/ProductsSidebar/ProductsSidebar.tsx`

**–ò–∑–º–µ–Ω–∏—Ç—å URL –Ω–∞:**
```typescript
const products: Product[] = [
  {
    id: 'marketplace',
    name: 'Marketplace',
    url: 'http://axa.local:8090',  // –±—ã–ª–æ localhost:3005
    icon: 'üè™',
    description: '–¢–æ—Ä–≥–æ–≤–∞—è –ø–ª–æ—â–∞–¥–∫–∞',
    available: true,
  },
  {
    id: 'social',
    name: 'Social Network',
    url: 'http://social.axa.local:8091',  // –±—ã–ª–æ localhost:3001
    icon: 'üë•',
    description: '–°–æ—Ü–∏–∞–ª—å–Ω–∞—è —Å–µ—Ç—å',
    available: true,
  },
  {
    id: 'stocks',
    name: 'Trader Diary',
    url: 'http://stocks.axa.local:8092',  // –±—ã–ª–æ localhost:3002
    icon: 'üìà',
    description: '–î–Ω–µ–≤–Ω–∏–∫ —Ç—Ä–µ–π–¥–µ—Ä–∞',
    available: true,
  },
  {
    id: 'crypto',
    name: 'CoinMarketCap',
    url: 'http://crypto.axa.local:8093',  // –±—ã–ª–æ localhost:3003
    icon: 'üí∞',
    description: '–ö—Ä–∏–ø—Ç–æ-–ø–ª–∞—Ç—Ñ–æ—Ä–º–∞',
    available: true,
  },
  {
    id: 'ai',
    name: 'AI Assistant',
    url: 'http://ai.axa.local:8094',  // –±—ã–ª–æ localhost:3006
    icon: 'ü§ñ',
    description: 'AI –ø–æ–º–æ—â–Ω–∏–∫',
    available: true,
  },
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ
];
```

### –®–∞–≥ 1.4: –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª—ã –¥–ª—è –≤—Å–µ—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–≤

**Social Network:**
```bash
cat > AXA-socialweb-frontend-main/.env << 'EOF'
NEXT_PUBLIC_BACKEND_AUTH_API=http://axa.local:8090/api/accounts
NEXT_PUBLIC_AUTH_URL=http://axa.local:8090
EOF
```

**Stocks Frontend:**
```bash
cat > AXA-stocks-frontend-main/.env << 'EOF'
NEXT_PUBLIC_AUTH_SERVICE_URL=http://axa.local:8090
NEXT_PUBLIC_AUTH_API=http://axa.local:8090/api/accounts
EOF
```

**CoinMarketCap:**
```bash
cat > AXA-coinmarketcap-main/.env << 'EOF'
NEXT_PUBLIC_AUTH_SERVICE_URL=http://axa.local:8090
NEXT_PUBLIC_AUTH_API=http://axa.local:8090/api/accounts
EOF
```

**AI Profiles:**
```bash
cat > AXA-Turian-AI-profiles-main/.env << 'EOF'
NEXT_PUBLIC_AUTH_API_URL=http://axa.local:8090/api/accounts
NEXT_PUBLIC_AUTH_SERVICE_URL=http://axa.local:8090
EOF
```

**Marketplace (–æ–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π):**
```bash
cat > AXA-marketplace-main/.env << 'EOF'
NEXT_PUBLIC_AUTH_URL=http://axa.local:8090
NEXT_PUBLIC_AUTH_API=http://axa.local:8090/api/accounts
EOF
```

### –®–∞–≥ 1.5: –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Django –¥–ª—è –Ω–æ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤

**–§–∞–π–ª:** `AXA-auth-server-main/.env`

**–î–æ–±–∞–≤–∏—Ç—å/–∏–∑–º–µ–Ω–∏—Ç—å:**
```env
ALLOWED_HOSTS=localhost,127.0.0.1,axa.local,social.axa.local,stocks.axa.local,crypto.axa.local,ai.axa.local

CSRF_TRUSTED_ORIGINS=http://axa.local:8090,http://social.axa.local:8091,http://stocks.axa.local:8092,http://crypto.axa.local:8093,http://ai.axa.local:8094

CORS_ALLOWED_ORIGINS=http://axa.local:8090,http://social.axa.local:8091,http://stocks.axa.local:8092,http://crypto.axa.local:8093,http://ai.axa.local:8094

# –î–ª—è Cookie –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏
SESSION_COOKIE_DOMAIN=.axa.local
CSRF_COOKIE_DOMAIN=.axa.local
SESSION_COOKIE_SAMESITE=Lax
CSRF_COOKIE_SAMESITE=Lax
```

### –®–∞–≥ 1.6: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Auth Server

```bash
cd AXA-auth-server-main
docker compose restart auth-core
```

### –®–∞–≥ 1.7: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ
pkill -f "next dev"

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ
cd AXA-marketplace-main && PORT=3005 npm run dev > /tmp/marketplace.log 2>&1 &
cd AXA-socialweb-frontend-main && PORT=3001 npm run dev > /tmp/social.log 2>&1 &
cd AXA-stocks-frontend-main && PORT=3002 npm run dev > /tmp/stocks.log 2>&1 &
cd AXA-coinmarketcap-main && PORT=3003 npm run dev > /tmp/coinmarketcap.log 2>&1 &
cd AXA-Turian-AI-profiles-main && PORT=3006 npm run dev > /tmp/ai.log 2>&1 &
```

### –®–∞–≥ 1.8: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å SSO

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://axa.local:8090`
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å/–≤–æ–π–¥–∏—Ç–µ
3. –û—Ç–∫—Ä–æ–π—Ç–µ `http://social.axa.local:8091`
4. **–í—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã!** ‚úÖ

---

## üîê –ß–∞—Å—Ç—å 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google OAuth

### –®–∞–≥ 2.1: –°–æ–∑–¥–∞—Ç—å Google OAuth –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: https://console.cloud.google.com/
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –∏–ª–∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **APIs & Services** ‚Üí **Credentials**
4. –ù–∞–∂–º–∏—Ç–µ **Create Credentials** ‚Üí **OAuth client ID**
5. **Application type:** Web application
6. **Name:** AXA Platform Local
7. **Authorized JavaScript origins:**
   ```
   http://axa.local:8090
   http://social.axa.local:8091
   http://stocks.axa.local:8092
   http://crypto.axa.local:8093
   http://ai.axa.local:8094
   ```
8. **Authorized redirect URIs:**
   ```
   http://axa.local:8090/api/accounts/google/callback
   ```
9. –ù–∞–∂–º–∏—Ç–µ **Create**
10. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ:**
    - Client ID
    - Client Secret

### –®–∞–≥ 2.2: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å django-allauth (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)

```bash
cd AXA-auth-server-main/auth-core
pip install django-allauth
```

–ò–ª–∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ `requirements.txt`:
```
django-allauth==0.57.0
```

### –®–∞–≥ 2.3: –û–±–Ω–æ–≤–∏—Ç—å settings.py

**–§–∞–π–ª:** `AXA-auth-server-main/auth-core/core/settings.py`

**–î–æ–±–∞–≤–∏—Ç—å –≤ INSTALLED_APPS:**
```python
INSTALLED_APPS = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    'django.contrib.sites',  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ!
    'allauth',
    'allauth.account',
    'allauth.socialaccount',
    'allauth.socialaccount.providers.google',
]

# Site ID –¥–ª—è django-allauth
SITE_ID = 1

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ allauth
AUTHENTICATION_BACKENDS = [
    'django.contrib.auth.backends.ModelBackend',
    'allauth.account.auth_backends.AuthenticationBackend',
]

SOCIALACCOUNT_PROVIDERS = {
    'google': {
        'SCOPE': [
            'profile',
            'email',
        ],
        'AUTH_PARAMS': {
            'access_type': 'online',
        },
        'APP': {
            'client_id': os.getenv('GOOGLE_CLIENT_ID', ''),
            'secret': os.getenv('GOOGLE_CLIENT_SECRET', ''),
            'key': ''
        }
    }
}

# Redirect –ø–æ—Å–ª–µ –ª–æ–≥–∏–Ω–∞
LOGIN_REDIRECT_URL = '/'
ACCOUNT_LOGOUT_REDIRECT_URL = '/'
```

### –®–∞–≥ 2.4: –î–æ–±–∞–≤–∏—Ç—å Google credentials –≤ .env

**–§–∞–π–ª:** `AXA-auth-server-main/.env`

```env
GOOGLE_CLIENT_ID=–≤–∞—à-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç
```

### –®–∞–≥ 2.5: –û–±–Ω–æ–≤–∏—Ç—å urls.py

**–§–∞–π–ª:** `AXA-auth-server-main/auth-core/core/urls.py`

```python
from django.urls import path, include

urlpatterns = [
    # ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
    path('api/accounts/', include('accounts.urls')),
    path('api/accounts/google/', include('allauth.urls')),  # –î–æ–±–∞–≤–∏—Ç—å —ç—Ç—É —Å—Ç—Ä–æ–∫—É
]
```

### –®–∞–≥ 2.6: –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
cd AXA-auth-server-main
docker compose exec auth-core python manage.py migrate
```

### –®–∞–≥ 2.7: –î–æ–±–∞–≤–∏—Ç—å Google Provider –≤ Django Admin

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://localhost:8000/admin/`
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ superuser
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Sites** ‚Üí –∏–∑–º–µ–Ω–∏—Ç–µ `example.com` –Ω–∞ `axa.local:8090`
4. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Social applications** ‚Üí Add social application
5. **Provider:** Google
6. **Name:** Google OAuth
7. **Client id:** –í–∞—à Client ID
8. **Secret key:** –í–∞—à Client Secret
9. **Sites:** –í—ã–±–µ—Ä–∏—Ç–µ `axa.local:8090`
10. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ

### –®–∞–≥ 2.8: –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google" –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã

**–ü—Ä–∏–º–µ—Ä –¥–ª—è Marketplace:**

```typescript
// AXA-marketplace-main/src/components/LoginModal.tsx
<button
  onClick={() => {
    window.location.href = 'http://axa.local:8090/api/accounts/google/login/';
  }}
  className="google-login-button"
>
  <GoogleIcon /> –í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google
</button>
```

---

## üåê –ß–∞—Å—Ç—å 3: –î–æ—Å—Ç—É–ø –∏–∑ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (ngrok)

### –®–∞–≥ 3.1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å ngrok –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Ä—Ç–æ–≤

**–í–∞—Ä–∏–∞–Ω—Ç A: –û–¥–∏–Ω —Ç—É–Ω–Ω–µ–ª—å –¥–ª—è –≥–ª–∞–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞**

```bash
ngrok http 8090 --host-header=rewrite
```

–î—Ä—É–≥ —Å–º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å Marketplace —á–µ—Ä–µ–∑ ngrok URL.

**–í–∞—Ä–∏–∞–Ω—Ç B: –ù–µ—Å–∫–æ–ª—å–∫–æ —Ç—É–Ω–Ω–µ–ª–µ–π (—Ç—Ä–µ–±—É–µ—Ç ngrok Pro)**

```bash
# Marketplace
ngrok http 8090 --subdomain axa-marketplace

# Social Network
ngrok http 8091 --subdomain axa-social

# Stocks
ngrok http 8092 --subdomain axa-stocks
```

### –®–∞–≥ 3.2: –û–±–Ω–æ–≤–∏—Ç—å Google OAuth –¥–ª—è ngrok

–í Google Console –¥–æ–±–∞–≤—å—Ç–µ ngrok URL –≤:
- **Authorized JavaScript origins:**
  ```
  https://–≤–∞—à-url.ngrok-free.app
  ```
- **Authorized redirect URIs:**
  ```
  https://–≤–∞—à-url.ngrok-free.app/api/accounts/google/callback
  ```

### –®–∞–≥ 3.3: –û–±–Ω–æ–≤–∏—Ç—å Django settings –¥–ª—è ngrok

**–§–∞–π–ª:** `AXA-auth-server-main/.env`

```env
# –î–æ–±–∞–≤–∏—Ç—å ngrok URL
ALLOWED_HOSTS=localhost,127.0.0.1,axa.local,...,–≤–∞—à-url.ngrok-free.app
CSRF_TRUSTED_ORIGINS=http://axa.local:8090,...,https://–≤–∞—à-url.ngrok-free.app
```

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –†–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç SSO:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://axa.local:8090`
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å: email + password
3. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å
4. –û—Ç–∫—Ä–æ–π—Ç–µ `http://social.axa.local:8091`
5. **–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚úÖ

### –¢–µ—Å—Ç Google OAuth:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `http://axa.local:8090`
2. –ù–∞–∂–º–∏—Ç–µ "–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google"
3. –í—ã–±–µ—Ä–∏—Ç–µ Google –∞–∫–∫–∞—É–Ω—Ç
4. –î–æ–ª–∂–Ω–∞ –ø—Ä–æ–π—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è ‚úÖ
5. –û—Ç–∫—Ä–æ–π—Ç–µ `http://stocks.axa.local:8092`
6. **–î–æ–ª–∂–Ω—ã –±—ã—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã** ‚úÖ

### –¢–µ—Å—Ç ngrok:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `ngrok http 8090`
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://abc123.ngrok-free.app`)
3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –¥—Ä—É–≥—É
4. –î—Ä—É–≥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç ‚Üí –≤–∏–¥–∏—Ç Marketplace ‚úÖ

---

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Cookie –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç –º–µ–∂–¥—É –¥–æ–º–µ–Ω–∞–º–∏

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Django settings:
```python
SESSION_COOKIE_DOMAIN = '.axa.local'
CSRF_COOKIE_DOMAIN = '.axa.local'
SESSION_COOKIE_SAMESITE = 'Lax'
```

### –ü—Ä–æ–±–ª–µ–º–∞: Google OAuth redirect error

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ redirect URI –≤ Google Console —Ç–æ—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å URL:
```
http://axa.local:8090/api/accounts/google/callback
```

### –ü—Ä–æ–±–ª–µ–º–∞: ngrok –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 502

**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞
curl http://axa.local:8090
curl http://localhost:3005
```

### –ü—Ä–æ–±–ª–µ–º–∞: "axa.local" –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `/etc/hosts`:
```bash
cat /etc/hosts | grep axa.local
# –î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å: 127.0.0.1 axa.local
```

–ï—Å–ª–∏ –Ω–µ—Ç - –¥–æ–±–∞–≤—å—Ç–µ —Å–Ω–æ–≤–∞:
```bash
sudo bash -c 'echo "127.0.0.1 axa.local" >> /etc/hosts'
```

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         –ò–Ω—Ç–µ—Ä–Ω–µ—Ç (—á–µ—Ä–µ–∑ ngrok)               ‚îÇ
‚îÇ    https://abc123.ngrok-free.app             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Nginx (8090-8094)                 ‚îÇ
‚îÇ  axa.local:8090      ‚Üí Marketplace (3005)    ‚îÇ
‚îÇ  social.axa.local:8091 ‚Üí Social (3001)       ‚îÇ
‚îÇ  stocks.axa.local:8092 ‚Üí Stocks (3002)       ‚îÇ
‚îÇ  crypto.axa.local:8093 ‚Üí Crypto (3003)       ‚îÇ
‚îÇ  ai.axa.local:8094    ‚Üí AI (3006)            ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì /api/accounts/
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      Auth Server (Django) :8001              ‚îÇ
‚îÇ  ‚Ä¢ Session Management (Redis)                ‚îÇ
‚îÇ  ‚Ä¢ Google OAuth                              ‚îÇ
‚îÇ  ‚Ä¢ User Profiles                             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                 ‚îÇ
                 ‚Üì Cookie: sessionid
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  auth-global-redis  ‚îÇ
         ‚îÇ  Shared Sessions    ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Cookie `sessionid` —à–∞—Ä–∏—Ç—Å—è –º–µ–∂–¥—É –≤—Å–µ–º–∏ `*.axa.local` –¥–æ–º–µ–Ω–∞–º–∏!**

---

## üéØ –ß—Ç–æ –î–∞–ª—å—à–µ?

–ü–æ—Å–ª–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. ‚úÖ –ü–µ—Ä–µ–µ–∑–¥ –Ω–∞ production –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `app.tyriantrade.com`)
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ HTTPS (Let's Encrypt)
3. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Kubernetes/Docker Swarm
4. ‚úÖ CI/CD –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

---

**–ì–æ—Ç–æ–≤—ã –Ω–∞—á–∞—Ç—å? –°–∫–∞–∂–∏—Ç–µ "–¥–∞–≤–∞–π –Ω–∞—á–Ω–µ–º" –∏ —è –≤—ã–ø–æ–ª–Ω—é –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ –ø–æ—Ä—è–¥–∫—É!** üöÄ


