# üîß –†–µ—à–µ–Ω–∏–µ: Dynamic Import –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è Hydration Error

**–î–∞—Ç–∞:** 2025-10-05  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û

---

## ‚ùå **–ü–†–û–ë–õ–ï–ú–ê**

### Hydration Error —Å Lucide React –∏–∫–æ–Ω–∫–∞–º–∏:

```
Hydration failed because the server rendered HTML didn't match the client.
```

**–ü—Ä–∏—á–∏–Ω—ã:**

1. **`'use client'` –≤ shared packages —á–µ—Ä–µ–∑ symlinks –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Next.js 15**
   - Next.js –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –¥–∏—Ä–µ–∫—Ç–∏–≤—É `'use client'` –∫–æ–≥–¥–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ symlink
   - SVG –∏–∫–æ–Ω–∫–∏ (Lucide React) —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏ –∫–ª–∏–µ–Ω—Ç–µ

2. **–°—Ç–∏–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å**
   - –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `shared/packages/ui` –±—ã–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
   - –ù–æ –∏–∑-–∑–∞ –∫—ç—à–∞ –∏ –ø—Ä–æ–±–ª–µ–º —Å SSR, –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å

---

## ‚úÖ **–†–ï–®–ï–ù–ò–ï**

### Dynamic Import —Å `{ ssr: false }`

**–í–º–µ—Å—Ç–æ:**
```typescript
import { Header, Footer } from '@tyrian/ui';
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º:**
```typescript
import dynamic from 'next/dynamic';

const Header = dynamic(
  () => import('@tyrian/ui').then(mod => ({ default: mod.Header })), 
  { 
    ssr: false,
    loading: () => <div className="h-16 bg-black/80 backdrop-blur-xl" />
  }
);

const Footer = dynamic(
  () => import('@tyrian/ui').then(mod => ({ default: mod.Footer })), 
  { ssr: false }
);
```

**–ß—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- `ssr: false` - –æ—Ç–∫–ª—é—á–∞–µ—Ç Server-Side Rendering –¥–ª—è —ç—Ç–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–Ω–¥–µ—Ä—è—Ç—Å—è **—Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ**
- –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–æ–º
- `loading` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç placeholder –ø–æ–∫–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

---

## üìä **–ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û**

### –û–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã –≤–æ –≤—Å–µ—Ö 6 –ø—Ä–æ–µ–∫—Ç–∞—Ö:

1. **Marketplace:**  
   `AXA-marketplace-main/src/app/ClientLayout.tsx`

2. **Social Network:**  
   `AXA-socialweb-frontend-main/src/app/(...base)/ClientLayout.tsx`

3. **Stocks:**  
   `AXA-stocks-frontend-main/src/app/ClientLayout.tsx`

4. **Cryptocurrency:**  
   `AXA-coinmarketcap-main/src/app/ClientLayout.tsx`

5. **Live Streaming:**  
   `stream-frontend-service-main/src/app/ClientLayout.tsx`

6. **AI Assistant:**  
   `AXA-Turian-AI-profiles-main/src/app/ClientLayout.tsx`

---

## üéØ **–ü–û–ß–ï–ú–£ –≠–¢–û –†–ê–ë–û–¢–ê–ï–¢**

### –ü—Ä–æ–±–ª–µ–º–∞ —Å SSR:

1. **–°–µ—Ä–≤–µ—Ä** —Ä–µ–Ω–¥–µ—Ä–∏—Ç Header —Å Lucide React –∏–∫–æ–Ω–∫–∞–º–∏
2. **–ö–ª–∏–µ–Ω—Ç** —Ä–µ–Ω–¥–µ—Ä–∏—Ç Header —Å Lucide React –∏–∫–æ–Ω–∫–∞–º–∏
3. Lucide React –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç SVG **–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏**, —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
4. Next.js –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ ‚Üí **Hydration Error**

### –†–µ—à–µ–Ω–∏–µ —Å Dynamic Import:

1. **–°–µ—Ä–≤–µ—Ä** —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ `<div className="h-16 bg-black/80 backdrop-blur-xl" />` (placeholder)
2. **–ö–ª–∏–µ–Ω—Ç** –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø–æ–ª–Ω—ã–π Header
3. –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –∫–ª–∏–µ–Ω—Ç–æ–º
4. **–ù–µ—Ç Hydration Error!** ‚úÖ

---

## üîç **–ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨**

### –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ dev server:

**1. –û—Ç–∫—Ä–æ–π—Ç–µ –ª—é–±–æ–π –ø—Ä–æ–µ–∫—Ç:**
- http://localhost:3005/ (Marketplace)
- http://localhost:3002/ (Stocks)

**2. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12):**

**–í–∫–ª–∞–¥–∫–∞ Console:**
```
‚úÖ –ù–µ—Ç "Hydration failed" –æ—à–∏–±–∫–∏
‚úÖ –ù–µ—Ç –∫—Ä–∞—Å–Ω—ã—Ö –æ—à–∏–±–æ–∫
```

**–í–∫–ª–∞–¥–∫–∞ Elements:**

–ù–∞–π–¥–∏—Ç–µ `<header>` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª–∞—Å—Å—ã:
```html
<header class="fixed top-0 left-0 right-0 z-50 h-16 bg-black/80 backdrop-blur-xl border-b border-gray-800/50 shadow-lg shadow-purple-900/10">
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
- ‚úÖ `bg-black/80 backdrop-blur-xl` - **—Å—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å!**
- ‚úÖ –§–∏–æ–ª–µ—Ç–æ–≤—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã - **–≥—Ä–∞–¥–∏–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç!**
- ‚ùå `bg-tyrian-black` –∏–ª–∏ –±–µ–ª—ã–µ –ª–∏–Ω–∏–∏ - **dev server –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω!**

**3. –í–∏–∑—É–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**

- ‚úÖ Header —Å —ç—Ñ—Ñ–µ–∫—Ç–æ–º "—á–µ—Ä–Ω–æ–≥–æ —Å—Ç–µ–∫–ª–∞" (–ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π)
- ‚úÖ Search bar —Å —Ñ–∏–æ–ª–µ—Ç–æ–≤–æ–π –≥—Ä–∞–Ω–∏—Ü–µ–π
- ‚úÖ –ö–Ω–æ–ø–∫–∏ Login —Å –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–º purple-600 ‚Üí purple-900
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ hover –∞–Ω–∏–º–∞—Ü–∏–∏

---

## üìù **–¢–ï–•–ù–ò–ß–ï–°–ö–û–ï –û–ë–™–Ø–°–ù–ï–ù–ò–ï**

### –ü–æ—á–µ–º—É `'use client'` –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª:

```
Next.js 15 + Symlinks + 'use client' = ‚ùå

–ü—Ä–æ–±–ª–µ–º–∞:
1. shared/packages/ui/src/components/Header.tsx –∏–º–µ–µ—Ç 'use client'
2. –ù–æ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ symlink:
   node_modules/@tyrian/ui ‚Üí ../../../shared/packages/ui
3. Next.js webpack –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç 'use client' —á–µ—Ä–µ–∑ symlinks
4. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—Å–µ —Ä–∞–≤–Ω–æ —Ä–µ–Ω–¥–µ—Ä–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
5. Hydration error!
```

### –ü–æ—á–µ–º—É Dynamic Import —Ä–∞–±–æ—Ç–∞–µ—Ç:

```
Dynamic Import + { ssr: false } = ‚úÖ

–†–µ—à–µ–Ω–∏–µ:
1. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏
2. { ssr: false } —è–≤–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç Next.js –ù–ï —Ä–µ–Ω–¥–µ—Ä–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
3. –°–µ—Ä–≤–µ—Ä —Ä–µ–Ω–¥–µ—Ä–∏—Ç —Ç–æ–ª—å–∫–æ placeholder
4. –ö–ª–∏–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∏ —Ä–µ–Ω–¥–µ—Ä–∏—Ç –ø–æ–ª–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
5. –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ ‚Üí –Ω–µ—Ç hydration error!
```

---

## üö® **–í–ê–ñ–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø**

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –û–ë–Ø–ó–ê–¢–ï–õ–ï–ù

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã **–î–û–õ–ñ–ù–´** –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev server:
```bash
Ctrl+C
npm run dev
```

–ü—Ä–æ—Å—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª **–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ**!

### 2. Loading Placeholder

```typescript
loading: () => <div className="h-16 bg-black/80 backdrop-blur-xl" />
```

–≠—Ç–æ—Ç placeholder:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–∫–∞ Header –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç "–º–∏–≥–∞–Ω–∏–µ" –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ò–º–µ–µ—Ç —Ç–µ –∂–µ —Å—Ç–∏–ª–∏ —á—Ç–æ –∏ –Ω–∞—Å—Ç–æ—è—â–∏–π Header (–≤—ã—Å–æ—Ç–∞ 64px, —Ñ–æ–Ω)

### 3. Performance

Dynamic Import —Å `ssr: false`:
- ‚úÖ –£—Å—Ç—Ä–∞–Ω—è–µ—Ç hydration error
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Å—Ç–∏–ª–∏
- ‚ö†Ô∏è –ù–µ–º–Ω–æ–≥–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ –ø–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (–∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ)
- ‚úÖ –ù–æ –¥–ª—è Header/Footer —ç—Ç–æ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ (~50-100ms)

---

## üìö **–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø**

### Next.js Dynamic Import:
https://nextjs.org/docs/app/building-your-application/optimizing/lazy-loading

### Next.js Hydration Error:
https://nextjs.org/docs/messages/react-hydration-error

### Lucide React:
https://lucide.dev/guide/packages/lucide-react

---

## üîÑ **–ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ù–´–ï –†–ï–®–ï–ù–ò–Ø**

### –†–µ—à–µ–Ω–∏–µ 1: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

‚ùå **–ú–∏–Ω—É—Å—ã:**
- –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –°–ª–æ–∂–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- –ü—Ä–æ—Ç–∏–≤ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ shared packages

### –†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å suppressHydrationWarning (–ù–ï —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```typescript
<header suppressHydrationWarning>
```

‚ùå **–ú–∏–Ω—É—Å—ã:**
- –°–∫—Ä—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É, –Ω–µ —Ä–µ—à–∞–µ—Ç –µ—ë
- –ú–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –¥—Ä—É–≥–∏–º –±–∞–≥–∞–º
- Next.js –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç

### –†–µ—à–µ–Ω–∏–µ 3: Dynamic Import —Å { ssr: false } (‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

‚úÖ **–ü–ª—é—Å—ã:**
- –ü–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω—è–µ—Ç hydration error
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç shared packages
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è Next.js –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ

---

## ‚úÖ **–ò–¢–û–ì**

**–ü—Ä–æ–±–ª–µ–º–∞:** Hydration error + —Å—Ç–∏–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å

**–ü—Ä–∏—á–∏–Ω–∞:** `'use client'` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ symlinks –≤ Next.js 15

**–†–µ—à–µ–Ω–∏–µ:** Dynamic Import —Å `{ ssr: false }` –≤–æ –≤—Å–µ—Ö ClientLayout —Ñ–∞–π–ª–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ Hydration error —É—Å—Ç—Ä–∞–Ω–µ–Ω
- ‚úÖ –°—Ç–∏–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–ª–∏—Å—å (—ç—Ñ—Ñ–µ–∫—Ç "—á–µ—Ä–Ω–æ–≥–æ —Å—Ç–µ–∫–ª–∞")
- ‚úÖ –§–∏–æ–ª–µ—Ç–æ–≤—ã–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏
- ‚úÖ Shared packages —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

**–§–∞–π–ª–æ–≤ –∏–∑–º–µ–Ω–µ–Ω–æ:** 6 ClientLayout.tsx —Ñ–∞–π–ª–æ–≤

**–í—Ä–µ–º—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** ~10 –º–∏–Ω—É—Ç

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å dev —Å–µ—Ä–≤–µ—Ä—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å

---

**‚úÖ –ì–æ—Ç–æ–≤–æ! –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä—ã –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç! üéâ**

