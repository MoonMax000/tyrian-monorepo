# üîß –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –±—ç–∫–µ–Ω–¥–æ–≤ —Å Shared Packages –∏ Nx

**–î–∞—Ç–∞:** 2025-10-05  
**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** Frontend –í–∞—Ä–∏–∞–Ω—Ç 3 –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ  
**–°–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±—ç–∫–µ–Ω–¥–æ–≤

---

## üìä **–¢–ï–ö–£–©–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ë–≠–ö–ï–ù–î–û–í**

### **–ù–∞–π–¥–µ–Ω–æ –±—ç–∫–µ–Ω–¥–æ–≤:**

```
üîê –ê–í–¢–û–†–ò–ó–ê–¶–ò–Ø (4 —Å–µ—Ä–≤–∏—Å–∞):
‚îú‚îÄ‚îÄ AXA-auth-server-main (Django) - –≥–ª–∞–≤–Ω—ã–π Auth Server
‚îú‚îÄ‚îÄ AXA-socialweb-auth-main - auth –¥–ª—è Social Network
‚îú‚îÄ‚îÄ AXA-coinmarketcap-auth-main - auth –¥–ª—è Crypto
‚îî‚îÄ‚îÄ stream-auth-service-master - auth –¥–ª—è Streaming

üë• SOCIAL NETWORK (7 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤):
‚îú‚îÄ‚îÄ favorites - –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
‚îú‚îÄ‚îÄ likes - –ª–∞–π–∫–∏
‚îú‚îÄ‚îÄ mail - –ø–æ—á—Ç–∞
‚îú‚îÄ‚îÄ notifications - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ posts - –ø–æ—Å—Ç—ã
‚îú‚îÄ‚îÄ profiles - –ø—Ä–æ—Ñ–∏–ª–∏
‚îî‚îÄ‚îÄ subscriptions - –ø–æ–¥–ø–∏—Å–∫–∏

‚Çø CRYPTOCURRENCY (2 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞):
‚îú‚îÄ‚îÄ auth - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îî‚îÄ‚îÄ mail - –ø–æ—á—Ç–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

üì° LIVE STREAMING (8 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤):
‚îú‚îÄ‚îÄ auth-service - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ chat-service - —á–∞—Ç
‚îú‚îÄ‚îÄ infra - –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
‚îú‚îÄ‚îÄ media-service - –º–µ–¥–∏–∞
‚îú‚îÄ‚îÄ notify-service - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îú‚îÄ‚îÄ payment - –ø–ª–∞—Ç–µ–∂–∏
‚îú‚îÄ‚îÄ recommend-service - —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ streamer-service - —Å—Ç—Ä–∏–º–∏–Ω–≥

üìà TRADING TERMINAL (1 —Å–µ—Ä–≤–∏—Å):
‚îî‚îÄ‚îÄ AXA-trading-terminal-back-main - –±—ç–∫–µ–Ω–¥ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
```

**–ò–¢–û–ì–û:** ~22 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞! üéØ

---

## üéØ **–°–¢–†–ê–¢–ï–ì–ò–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–ò**

### **–§–ê–ó–ê 1: –í–ê–†–ò–ê–ù–¢–´ –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ë–≠–ö–ï–ù–î–û–í**

#### **üü¢ –í–∞—Ä–∏–∞–Ω—Ç A: –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–∞—á–∞–ª–∞)**

**–°—É—Ç—å:**
- –ë—ç–∫–µ–Ω–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω—ã–º–∏** –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏
- Frontend shared packages **—Ç–æ–ª—å–∫–æ –¥–ª—è UI**
- –ö–∞–∂–¥—ã–π —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±—â–∞–µ—Ç—Å—è —Å–æ —Å–≤–æ–∏–º–∏ –±—ç–∫–µ–Ω–¥–∞–º–∏
- **–û–±—â–∏–π Auth Server** (AXA-auth-server-main) –¥–ª—è SSO

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Frontend (Shared UI):
‚îú‚îÄ‚îÄ Marketplace ‚Üí API: AXA-auth-server
‚îú‚îÄ‚îÄ Social ‚Üí API: AXA-socialweb-* –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ Crypto ‚Üí API: AXA-coinmarketcap-* –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
‚îú‚îÄ‚îÄ Stocks ‚Üí API: AXA-trading-terminal-back
‚îî‚îÄ‚îÄ Streaming ‚Üí API: stream-* –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã

Backend (–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã):
‚îî‚îÄ‚îÄ –í—Å–µ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–º–∏
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
- ‚úÖ –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–º–∏
- ‚úÖ –õ–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –†–∞–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –ú–Ω–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚ùå –°–ª–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ø–ª–æ—è (22 —Å–µ—Ä–≤–∏—Å–∞!)

---

#### **üü° –í–∞—Ä–∏–∞–Ω—Ç B: API Gateway (–°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å)**

**–°—É—Ç—å:**
- –°–æ–∑–¥–∞—Ç—å **–µ–¥–∏–Ω—ã–π API Gateway** –ø–µ—Ä–µ–¥ –≤—Å–µ–º–∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º–∏
- Frontend –æ–±—â–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å Gateway
- Gateway –º–∞—Ä—à—Ä—É—Ç–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ –Ω—É–∂–Ω—ã–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
Frontend (Shared UI) ‚Üí API Gateway ‚Üí –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
                           ‚Üì
                     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                     ‚Üì             ‚Üì
              Auth Services   Business Logic
                                  (posts, profiles, etc)
```

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- Kong Gateway
- Nginx + Lua
- Traefik
- AWS API Gateway

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Rate limiting
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- ‚ùå Single point of failure (–µ—Å–ª–∏ Gateway –ø–∞–¥–∞–µ—Ç)

---

#### **üî¥ –í–∞—Ä–∏–∞–Ω—Ç C: Nx Monorepo –¥–ª—è –í–°–ï–ì–û (–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)**

**–°—É—Ç—å:**
- –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å **–ò —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã –ò –±—ç–∫–µ–Ω–¥—ã** –≤ –æ–¥–∏–Ω Nx –º–æ–Ω–æ—Ä–µ–ø–æ
- Shared packages –¥–ª—è frontend **–ò** backend
- –ï–¥–∏–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ –∏ –¥–µ–ø–ª–æ—è

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
tyrian-platform-monorepo/
‚îú‚îÄ‚îÄ apps/
‚îÇ   ‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ marketplace/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ social/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ... 7 —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ backend/
‚îÇ       ‚îú‚îÄ‚îÄ auth-server/
‚îÇ       ‚îú‚îÄ‚îÄ social-posts/
‚îÇ       ‚îî‚îÄ‚îÄ ... 22 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞
‚îú‚îÄ‚îÄ packages/
‚îÇ   ‚îú‚îÄ‚îÄ ui/ (frontend shared)
‚îÇ   ‚îú‚îÄ‚îÄ feature-flags/ (frontend shared)
‚îÇ   ‚îú‚îÄ‚îÄ api-clients/ (backend shared)
‚îÇ   ‚îú‚îÄ‚îÄ db-models/ (backend shared)
‚îÇ   ‚îî‚îÄ‚îÄ auth-utils/ (backend shared)
‚îî‚îÄ‚îÄ tools/
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ï–¥–∏–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞
- ‚úÖ Shared code –º–µ–∂–¥—É –±—ç–∫–µ–Ω–¥–∞–º–∏
- ‚úÖ –û–¥–∏–Ω CI/CD –¥–ª—è –≤—Å–µ–≥–æ
- ‚úÖ –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –û—á–µ–Ω—å —Å–ª–æ–∂–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è (6-12 –º–µ—Å—è—Ü–µ–≤!)
- ‚ùå –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
- ‚ùå –û–≥—Ä–æ–º–Ω—ã–π –º–æ–Ω–æ—Ä–µ–ø–æ

---

## üéØ **–ú–û–Ø –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø: –ü–û–≠–¢–ê–ü–ù–´–ô –ü–û–î–•–û–î**

### **–≠–¢–ê–ü 1 (–°–ï–ô–ß–ê–°): –í–∞—Ä–∏–∞–Ω—Ç A + –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è Auth**

**–°—Ä–æ–∫:** 1-2 –Ω–µ–¥–µ–ª–∏

1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AXA-auth-server-main** –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π Auth Server
2. –£–±—Ä–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ auth —Å–µ—Ä–≤–µ—Ä—ã (socialweb-auth, coinmarketcap-auth, stream-auth)
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SSO —á–µ—Ä–µ–∑ –æ–¥–∏–Ω Auth Server
4. Frontend shared packages —É–∂–µ –≥–æ—Ç–æ–≤—ã ‚úÖ

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

```bash
# 1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Auth Server –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
cd AXA-auth-server-main

# 2. –î–æ–±–∞–≤–∏—Ç—å endpoints –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞:
# - /api/accounts/marketplace/
# - /api/accounts/social/
# - /api/accounts/crypto/
# - /api/accounts/stocks/
# - /api/accounts/stream/

# 3. –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –µ–¥–∏–Ω—ã–π Auth
# (–£–∂–µ —á–∞—Å—Ç–∏—á–Ω–æ —Å–¥–µ–ª–∞–Ω–æ —á–µ—Ä–µ–∑ .env.local)

# 4. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ auth —Å–µ—Ä–≤–µ—Ä—ã
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û–¥–∏–Ω Auth Server –≤–º–µ—Å—Ç–æ 4
- ‚úÖ SSO —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ 3 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ –º–µ–Ω—å—à–µ (19 –≤–º–µ—Å—Ç–æ 22)

---

### **–≠–¢–ê–ü 2 (–ß–ï–†–ï–ó 1 –ú–ï–°–Ø–¶): API Gateway**

**–°—Ä–æ–∫:** 2-3 –Ω–µ–¥–µ–ª–∏

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Kong Gateway** –∏–ª–∏ Nginx
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
3. –î–æ–±–∞–≤–∏—Ç—å rate limiting
4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –≠—Ç–∞–ø–∞ 2:**
```
Frontend ‚Üí Kong Gateway ‚Üí –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
  (Shared UI)     ‚Üì
              [Auth, Rate Limit, Monitoring]
```

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Kong
docker pull kong

# 2. –°–æ–∑–¥–∞—Ç—å kong.yml –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
services:
  - name: auth-service
    url: http://auth-server:8001
    routes:
      - paths: [/api/auth]
  
  - name: social-posts
    url: http://social-posts:8000
    routes:
      - paths: [/api/social/posts]
  
  # ... –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞

# 3. –û–±–Ω–æ–≤–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã:
# API_BASE_URL=http://localhost:8000 (Kong Gateway)
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö API
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- ‚úÖ Rate limiting
- ‚úÖ –õ–µ–≥—á–µ –¥–µ–ø–ª–æ–∏—Ç—å

---

### **–≠–¢–ê–ü 3 (–ß–ï–†–ï–ó 3-6 –ú–ï–°–Ø–¶–ï–í): Shared Backend Utils**

**–°—Ä–æ–∫:** 1-2 –º–µ—Å—è—Ü–∞

–°–æ–∑–¥–∞—Ç—å **shared packages –¥–ª—è –±—ç–∫–µ–Ω–¥–æ–≤**:

```
shared/
‚îú‚îÄ‚îÄ frontend/ (—É–∂–µ –µ—Å—Ç—å)
‚îÇ   ‚îú‚îÄ‚îÄ ui/
‚îÇ   ‚îú‚îÄ‚îÄ feature-flags/
‚îÇ   ‚îî‚îÄ‚îÄ types/
‚îî‚îÄ‚îÄ backend/ (–Ω–æ–≤–æ–µ)
    ‚îú‚îÄ‚îÄ auth-utils/
    ‚îú‚îÄ‚îÄ db-models/
    ‚îú‚îÄ‚îÄ api-clients/
    ‚îî‚îÄ‚îÄ common-middleware/
```

**–ß—Ç–æ –¥–µ–ª–∞—Ç—å:**

1. **–°–æ–∑–¥–∞—Ç—å @tyrian/backend-auth**:
```python
# shared/backend/auth-utils/jwt_utils.py
def verify_jwt(token: str) -> dict:
    # –û–±—â–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ JWT
    pass
```

2. **–°–æ–∑–¥–∞—Ç—å @tyrian/backend-models**:
```python
# shared/backend/db-models/user.py
class User(BaseModel):
    id: UUID
    email: str
    # –û–±—â–∞—è –º–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

3. **–ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞–º**:
```python
# –í –ª—é–±–æ–º –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–µ:
from tyrian_backend_auth import verify_jwt
from tyrian_backend_models import User
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –≤ –±—ç–∫–µ–Ω–¥–∞—Ö
- ‚úÖ –ï–¥–∏–Ω—ã–µ –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ï–¥–∏–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

---

### **–≠–¢–ê–ü 4 (–ß–ï–†–ï–ó 6-12 –ú–ï–°–Ø–¶–ï–í): Nx Monorepo –¥–ª—è –≤—Å–µ–≥–æ**

**–°—Ä–æ–∫:** 3-6 –º–µ—Å—è—Ü–µ–≤

–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å **–í–°–Å** –≤ Nx –º–æ–Ω–æ—Ä–µ–ø–æ (–í–∞—Ä–∏–∞–Ω—Ç C).

–°–º. `–ì–û–¢–û–í–ù–û–°–¢–¨_–ö_–í–ê–†–ò–ê–ù–¢–£_2.md` –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## üîß **–ö–û–ù–ö–†–ï–¢–ù–´–ï –®–ê–ì–ò –î–õ–Ø –≠–¢–ê–ü–ê 1 (–°–ï–ô–ß–ê–°)**

### **–®–ê–ì 1: –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è Auth Server (3-5 –¥–Ω–µ–π)**

#### **1.1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å AXA-auth-server-main**

```bash
cd AXA-auth-server-main

# –û–±–Ω–æ–≤–∏—Ç—å settings.py:
ALLOWED_HOSTS = [
    'localhost',
    '127.0.0.1',
    'tyriantrade.ngrok.pro',  # –≤–∞—à –¥–æ–º–µ–Ω
]

# –î–æ–±–∞–≤–∏—Ç—å CORS –¥–ª—è –≤—Å–µ—Ö —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–≤:
CORS_ALLOWED_ORIGINS = [
    'http://localhost:3000',  # Marketplace
    'http://localhost:3001',  # Social
    'http://localhost:3002',  # Crypto
    'http://localhost:3003',  # Stocks
    'http://localhost:3004',  # Stream
    'http://localhost:3005',  # AI
    'http://localhost:5173',  # Portfolios
]

# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å SESSION_COOKIE_DOMAIN:
SESSION_COOKIE_DOMAIN = 'localhost'  # –¥–ª—è dev
# SESSION_COOKIE_DOMAIN = '.tyriantrade.com'  # –¥–ª—è production
```

#### **1.2. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ã**

–í –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ —Å–æ–∑–¥–∞—Ç—å `src/api/auth.ts`:

```typescript
// shared/packages/api/src/auth.ts
const AUTH_BASE_URL = process.env.NEXT_PUBLIC_AUTH_URL || 'http://localhost:8001';

export async function login(email: string, password: string) {
  const res = await fetch(`${AUTH_BASE_URL}/api/accounts/login/`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password }),
    credentials: 'include', // –í–ê–ñ–ù–û –¥–ª—è cookies!
  });
  return res.json();
}

export async function getProfile() {
  const res = await fetch(`${AUTH_BASE_URL}/api/accounts/profile/`, {
    credentials: 'include',
  });
  return res.json();
}

export async function logout() {
  const res = await fetch(`${AUTH_BASE_URL}/api/accounts/logout/`, {
    method: 'POST',
    credentials: 'include',
  });
  return res.json();
}
```

#### **1.3. –°–æ–∑–¥–∞—Ç—å shared API client package**

```bash
cd shared/packages
mkdir -p api/src
cd api

# package.json:
cat > package.json << 'EOF'
{
  "name": "@tyrian/api",
  "version": "1.0.0",
  "main": "./src/index.ts",
  "dependencies": {
    "axios": "^1.6.0"
  }
}
EOF

# src/index.ts:
cat > src/index.ts << 'EOF'
export * from './auth';
export * from './config';
EOF
```

#### **1.4. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –∫ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞–º**

```bash
# –í –∫–∞–∂–¥–æ–º —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ:
cd AXA-marketplace-main
npm pkg set dependencies.@tyrian/api='file:../shared/packages/api'
npm install
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**

```typescript
// –í –ª—é–±–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ:
import { login, getProfile, logout } from '@tyrian/api';

async function handleLogin() {
  const user = await login(email, password);
  console.log('Logged in:', user);
}
```

---

### **–®–ê–ì 2: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã Social Network (1 –Ω–µ–¥–µ–ª—è)**

**–ü—Ä–æ–±–ª–µ–º–∞:** –£ Social Network 7 –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤.

**–†–µ—à–µ–Ω–∏–µ:** API Gateway –ø–µ—Ä–µ–¥ –Ω–∏–º–∏.

#### **2.1. Docker Compose –¥–ª—è –≤—Å–µ—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤**

–°–æ–∑–¥–∞—Ç—å `docker-compose.all-social.yml`:

```yaml
version: '3.8'

services:
  # API Gateway (Nginx)
  gateway:
    image: nginx:alpine
    ports:
      - "8080:80"
    volumes:
      - ./nginx-social.conf:/etc/nginx/nginx.conf
    depends_on:
      - posts
      - profiles
      - likes
      - favorites
      - subscriptions
      - notifications
      - mail

  # –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
  posts:
    build: ./AXA-socialweb-posts-main
    expose:
      - "8000"
  
  profiles:
    build: ./AXA-socialweb-profiles-main
    expose:
      - "8000"
  
  # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ
```

#### **2.2. Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**

```nginx
http {
  upstream posts_backend {
    server posts:8000;
  }
  
  upstream profiles_backend {
    server profiles:8000;
  }
  
  server {
    listen 80;
    
    location /api/social/posts/ {
      proxy_pass http://posts_backend/;
    }
    
    location /api/social/profiles/ {
      proxy_pass http://profiles_backend/;
    }
    
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ
  }
}
```

#### **2.3. –ó–∞–ø—É—Å–∫**

```bash
docker-compose -f docker-compose.all-social.yml up -d
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –í—Å–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã Social Network –∑–∞ –æ–¥–Ω–∏–º –ø–æ—Ä—Ç–æ–º (8080)
- ‚úÖ Frontend –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `localhost:8080/api/social/*`

---

## üìä **–ò–¢–û–ì–û–í–ê–Ø –ê–†–•–ò–¢–ï–ö–¢–£–†–ê –ü–û–°–õ–ï –≠–¢–ê–ü–ê 1**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     FRONTEND (7 –ø—Ä–æ–µ–∫—Ç–æ–≤)                   ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îÇ
‚îÇ  ‚îÇMarketplace ‚îÇ ‚îÇ  Social    ‚îÇ ‚îÇ   Crypto   ‚îÇ ...         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ
‚îÇ        ‚îÇ              ‚îÇ              ‚îÇ                      ‚îÇ
‚îÇ        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                      ‚îÇ
‚îÇ                       ‚îÇ                                     ‚îÇ
‚îÇ                @tyrian/ui, @tyrian/feature-flags           ‚îÇ
‚îÇ                @tyrian/api ‚Üê –ù–û–í–û–ï!                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
                        ‚ñº
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ     AXA-auth-server-main      ‚îÇ ‚Üê –ï–¥–∏–Ω—ã–π Auth!
        ‚îÇ         (Django)              ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ               ‚îÇ               ‚îÇ
        ‚ñº               ‚ñº               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Social       ‚îÇ ‚îÇ Crypto       ‚îÇ ‚îÇ Streaming    ‚îÇ
‚îÇ Microservices‚îÇ ‚îÇ Microservices‚îÇ ‚îÇ Microservices‚îÇ
‚îÇ (7 services) ‚îÇ ‚îÇ (2 services) ‚îÇ ‚îÇ (8 services) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üéØ **–ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï?**

### **–í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤:**

1. **"–ù–∞—á–∞—Ç—å —Å –≠—Ç–∞–ø–∞ 1"** - —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è Auth Server
2. **"–°—Ä–∞–∑—É –¥–µ–ª–∞—Ç—å API Gateway"** - –±–æ–ª–µ–µ –±—ã—Å—Ç—Ä—ã–π –ø—É—Ç—å
3. **"–•–æ—á—É Nx –¥–ª—è –≤—Å–µ–≥–æ"** - –¥–æ–ª–≥–æ –Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
4. **"–û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å"** - –ø–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ú–æ–π —Å–æ–≤–µ—Ç:**  
üëâ **–ù–∞—á–Ω–∏—Ç–µ —Å –≠—Ç–∞–ø–∞ 1** (—É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è Auth) - —ç—Ç–æ –±—ã—Å—Ç—Ä–æ (1-2 –Ω–µ–¥–µ–ª–∏) –∏ –¥–∞—Å—Ç –±–æ–ª—å—à–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!

---

**–ì–æ—Ç–æ–≤ –ø–æ–º–æ—á—å —Å –ª—é–±—ã–º –∏–∑ —ç—Ç–∞–ø–æ–≤! –ß—Ç–æ –≤—ã–±–∏—Ä–∞–µ—Ç–µ?** üöÄ

