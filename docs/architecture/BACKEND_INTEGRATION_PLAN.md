# ðŸ”§ ÐŸÐ»Ð°Ð½ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ð¸ Ð±ÑÐºÐµÐ½Ð´Ð¾Ð² Ñ Shared Packages Ð¸ Nx

**Ð”Ð°Ñ‚Ð°:** 2025-10-05  
**Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÑ‚Ð°Ñ‚ÑƒÑ:** Frontend Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 3 Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½ âœ…  
**Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑÑ‚Ð°Ð¿:** Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ð±ÑÐºÐµÐ½Ð´Ð¾Ð²

---

## ðŸ“Š **Ð¢Ð•ÐšÐ£Ð©ÐÐ¯ ÐÐ Ð¥Ð˜Ð¢Ð•ÐšÐ¢Ð£Ð Ð Ð‘Ð­ÐšÐ•ÐÐ”ÐžÐ’**

### **ÐÐ°Ð¹Ð´ÐµÐ½Ð¾ Ð±ÑÐºÐµÐ½Ð´Ð¾Ð²:**

```
ðŸ” ÐÐ’Ð¢ÐžÐ Ð˜Ð—ÐÐ¦Ð˜Ð¯ (4 ÑÐµÑ€Ð²Ð¸ÑÐ°):
â”œâ”€â”€ AXA-auth-server-main (Django) - Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ Auth Server
â”œâ”€â”€ AXA-socialweb-auth-main - auth Ð´Ð»Ñ Social Network
â”œâ”€â”€ AXA-coinmarketcap-auth-main - auth Ð´Ð»Ñ Crypto
â””â”€â”€ stream-auth-service-master - auth Ð´Ð»Ñ Streaming

ðŸ‘¥ SOCIAL NETWORK (7 Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²):
â”œâ”€â”€ favorites - Ð¸Ð·Ð±Ñ€Ð°Ð½Ð½Ð¾Ðµ
â”œâ”€â”€ likes - Ð»Ð°Ð¹ÐºÐ¸
â”œâ”€â”€ mail - Ð¿Ð¾Ñ‡Ñ‚Ð°
â”œâ”€â”€ notifications - ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
â”œâ”€â”€ posts - Ð¿Ð¾ÑÑ‚Ñ‹
â”œâ”€â”€ profiles - Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ð¸
â””â”€â”€ subscriptions - Ð¿Ð¾Ð´Ð¿Ð¸ÑÐºÐ¸

â‚¿ CRYPTOCURRENCY (2 Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°):
â”œâ”€â”€ auth - Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ
â””â”€â”€ mail - Ð¿Ð¾Ñ‡Ñ‚Ð¾Ð²Ñ‹Ðµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ

ðŸ“¡ LIVE STREAMING (8 Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²):
â”œâ”€â”€ auth-service - Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ
â”œâ”€â”€ chat-service - Ñ‡Ð°Ñ‚
â”œâ”€â”€ infra - Ð¸Ð½Ñ„Ñ€Ð°ÑÑ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð°
â”œâ”€â”€ media-service - Ð¼ÐµÐ´Ð¸Ð°
â”œâ”€â”€ notify-service - ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ
â”œâ”€â”€ payment - Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð¸
â”œâ”€â”€ recommend-service - Ñ€ÐµÐºÐ¾Ð¼ÐµÐ½Ð´Ð°Ñ†Ð¸Ð¸
â””â”€â”€ streamer-service - ÑÑ‚Ñ€Ð¸Ð¼Ð¸Ð½Ð³

ðŸ“ˆ TRADING TERMINAL (1 ÑÐµÑ€Ð²Ð¸Ñ):
â””â”€â”€ AXA-trading-terminal-back-main - Ð±ÑÐºÐµÐ½Ð´ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»Ð°
```

**Ð˜Ð¢ÐžÐ“Ðž:** ~22 Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°! ðŸŽ¯

---

## ðŸŽ¯ **Ð¡Ð¢Ð ÐÐ¢Ð•Ð“Ð˜Ð¯ Ð˜ÐÐ¢Ð•Ð“Ð ÐÐ¦Ð˜Ð˜**

### **Ð¤ÐÐ—Ð 1: Ð’ÐÐ Ð˜ÐÐÐ¢Ð« ÐŸÐžÐ”ÐšÐ›Ð®Ð§Ð•ÐÐ˜Ð¯ Ð‘Ð­ÐšÐ•ÐÐ”ÐžÐ’**

#### **ðŸŸ¢ Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ A: ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ðº ÐµÑÑ‚ÑŒ (Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ Ð´Ð»Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°)**

**Ð¡ÑƒÑ‚ÑŒ:**
- Ð‘ÑÐºÐµÐ½Ð´Ñ‹ Ð¾ÑÑ‚Ð°ÑŽÑ‚ÑÑ **Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ð¼Ð¸** Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸
- Frontend shared packages **Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð´Ð»Ñ UI**
- ÐšÐ°Ð¶Ð´Ñ‹Ð¹ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´ Ð¾Ð±Ñ‰Ð°ÐµÑ‚ÑÑ ÑÐ¾ ÑÐ²Ð¾Ð¸Ð¼Ð¸ Ð±ÑÐºÐµÐ½Ð´Ð°Ð¼Ð¸
- **ÐžÐ±Ñ‰Ð¸Ð¹ Auth Server** (AXA-auth-server-main) Ð´Ð»Ñ SSO

**ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°:**
```
Frontend (Shared UI):
â”œâ”€â”€ Marketplace â†’ API: AXA-auth-server
â”œâ”€â”€ Social â†’ API: AXA-socialweb-* Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹
â”œâ”€â”€ Crypto â†’ API: AXA-coinmarketcap-* Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹
â”œâ”€â”€ Stocks â†’ API: AXA-trading-terminal-back
â””â”€â”€ Streaming â†’ API: stream-* Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹

Backend (ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹):
â””â”€â”€ Ð’ÑÐµ Ð¾ÑÑ‚Ð°ÑŽÑ‚ÑÑ Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ñ‹Ð¼Ð¸
```

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… ÐœÐ¸Ð½Ð¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ
- âœ… ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹ Ð¾ÑÑ‚Ð°ÑŽÑ‚ÑÑ Ð°Ð²Ñ‚Ð¾Ð½Ð¾Ð¼Ð½Ñ‹Ð¼Ð¸
- âœ… Ð›ÐµÐ³ÐºÐ¾ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ
- âœ… Ð Ð°Ð·Ð½Ñ‹Ðµ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð¼Ð¾Ð³ÑƒÑ‚ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð½ÐµÐ·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾

**ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:**
- âŒ ÐœÐ½Ð¾Ð³Ð¾ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð² Ð´Ð»Ñ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ
- âŒ Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ Ð´ÐµÐ¿Ð»Ð¾Ñ (22 ÑÐµÑ€Ð²Ð¸ÑÐ°!)

---

#### **ðŸŸ¡ Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ B: API Gateway (Ð¡Ñ€ÐµÐ´Ð½ÑÑ ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ)**

**Ð¡ÑƒÑ‚ÑŒ:**
- Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ **ÐµÐ´Ð¸Ð½Ñ‹Ð¹ API Gateway** Ð¿ÐµÑ€ÐµÐ´ Ð²ÑÐµÐ¼Ð¸ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼Ð¸
- Frontend Ð¾Ð±Ñ‰Ð°ÐµÑ‚ÑÑ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Gateway
- Gateway Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð¸Ñ€ÑƒÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ðº Ð½ÑƒÐ¶Ð½Ñ‹Ð¼ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼

**ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°:**
```
Frontend (Shared UI) â†’ API Gateway â†’ ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹
                           â†“
                     â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                     â†“             â†“
              Auth Services   Business Logic
                                  (posts, profiles, etc)
```

**Ð˜Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹:**
- Kong Gateway
- Nginx + Lua
- Traefik
- AWS API Gateway

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… Ð•Ð´Ð¸Ð½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð°
- âœ… Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ
- âœ… Rate limiting
- âœ… ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð² Ð¾Ð´Ð½Ð¾Ð¼ Ð¼ÐµÑÑ‚Ðµ

**ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:**
- âŒ Ð”Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÑÐ»Ð¾Ð¹ ÑÐ»Ð¾Ð¶Ð½Ð¾ÑÑ‚Ð¸
- âŒ Single point of failure (ÐµÑÐ»Ð¸ Gateway Ð¿Ð°Ð´Ð°ÐµÑ‚)

---

#### **ðŸ”´ Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ C: Nx Monorepo Ð´Ð»Ñ Ð’Ð¡Ð•Ð“Ðž (ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ Ð¸Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ)**

**Ð¡ÑƒÑ‚ÑŒ:**
- ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ **Ð˜ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ñ‹ Ð˜ Ð±ÑÐºÐµÐ½Ð´Ñ‹** Ð² Ð¾Ð´Ð¸Ð½ Nx Ð¼Ð¾Ð½Ð¾Ñ€ÐµÐ¿Ð¾
- Shared packages Ð´Ð»Ñ frontend **Ð˜** backend
- Ð•Ð´Ð¸Ð½Ð°Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ð° ÑÐ±Ð¾Ñ€ÐºÐ¸ Ð¸ Ð´ÐµÐ¿Ð»Ð¾Ñ

**ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð°:**
```
tyrian-platform-monorepo/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ frontend/
â”‚   â”‚   â”œâ”€â”€ marketplace/
â”‚   â”‚   â”œâ”€â”€ social/
â”‚   â”‚   â””â”€â”€ ... 7 Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð¾Ð²
â”‚   â””â”€â”€ backend/
â”‚       â”œâ”€â”€ auth-server/
â”‚       â”œâ”€â”€ social-posts/
â”‚       â””â”€â”€ ... 22 Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ ui/ (frontend shared)
â”‚   â”œâ”€â”€ feature-flags/ (frontend shared)
â”‚   â”œâ”€â”€ api-clients/ (backend shared)
â”‚   â”œâ”€â”€ db-models/ (backend shared)
â”‚   â””â”€â”€ auth-utils/ (backend shared)
â””â”€â”€ tools/
```

**ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- âœ… Ð•Ð´Ð¸Ð½Ð°Ñ ÐºÐ¾Ð´Ð¾Ð²Ð°Ñ Ð±Ð°Ð·Ð°
- âœ… Shared code Ð¼ÐµÐ¶Ð´Ñƒ Ð±ÑÐºÐµÐ½Ð´Ð°Ð¼Ð¸
- âœ… ÐžÐ´Ð¸Ð½ CI/CD Ð´Ð»Ñ Ð²ÑÐµÐ³Ð¾
- âœ… ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð°Ñ ÑÑ„Ñ„ÐµÐºÑ‚Ð¸Ð²Ð½Ð¾ÑÑ‚ÑŒ

**ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚ÐºÐ¸:**
- âŒ ÐžÑ‡ÐµÐ½ÑŒ ÑÐ»Ð¾Ð¶Ð½Ð°Ñ Ð¼Ð¸Ð³Ñ€Ð°Ñ†Ð¸Ñ (6-12 Ð¼ÐµÑÑÑ†ÐµÐ²!)
- âŒ Ð¢Ñ€ÐµÐ±ÑƒÐµÑ‚ Ð¿ÐµÑ€ÐµÐ¾Ð±ÑƒÑ‡ÐµÐ½Ð¸Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ‹
- âŒ ÐžÐ³Ñ€Ð¾Ð¼Ð½Ñ‹Ð¹ Ð¼Ð¾Ð½Ð¾Ñ€ÐµÐ¿Ð¾

---

## ðŸŽ¯ **ÐœÐžÐ¯ Ð Ð•ÐšÐžÐœÐ•ÐÐ”ÐÐ¦Ð˜Ð¯: ÐŸÐžÐ­Ð¢ÐÐŸÐÐ«Ð™ ÐŸÐžÐ”Ð¥ÐžÐ”**

### **Ð­Ð¢ÐÐŸ 1 (Ð¡Ð•Ð™Ð§ÐÐ¡): Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ A + Ð£Ð½Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Auth**

**Ð¡Ñ€Ð¾Ðº:** 1-2 Ð½ÐµÐ´ÐµÐ»Ð¸

1. **Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ AXA-auth-server-main** ÐºÐ°Ðº ÐµÐ´Ð¸Ð½ÑÑ‚Ð²ÐµÐ½Ð½Ñ‹Ð¹ Auth Server
2. Ð£Ð±Ñ€Ð°Ñ‚ÑŒ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ auth ÑÐµÑ€Ð²ÐµÑ€Ñ‹ (socialweb-auth, coinmarketcap-auth, stream-auth)
3. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ SSO Ñ‡ÐµÑ€ÐµÐ· Ð¾Ð´Ð¸Ð½ Auth Server
4. Frontend shared packages ÑƒÐ¶Ðµ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ âœ…

**Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ:**

```bash
# 1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Auth Server Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð¾Ð²
cd AXA-auth-server-main

# 2. Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ endpoints Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ð´ÑƒÐºÑ‚Ð°:
# - /api/accounts/marketplace/
# - /api/accounts/social/
# - /api/accounts/crypto/
# - /api/accounts/stocks/
# - /api/accounts/stream/

# 3. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ñ‹ Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð»Ð¸ ÐµÐ´Ð¸Ð½Ñ‹Ð¹ Auth
# (Ð£Ð¶Ðµ Ñ‡Ð°ÑÑ‚Ð¸Ñ‡Ð½Ð¾ ÑÐ´ÐµÐ»Ð°Ð½Ð¾ Ñ‡ÐµÑ€ÐµÐ· .env.local)

# 4. ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ auth ÑÐµÑ€Ð²ÐµÑ€Ñ‹
```

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:**
- âœ… ÐžÐ´Ð¸Ð½ Auth Server Ð²Ð¼ÐµÑÑ‚Ð¾ 4
- âœ… SSO Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚
- âœ… 3 Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ° Ð¼ÐµÐ½ÑŒÑˆÐµ (19 Ð²Ð¼ÐµÑÑ‚Ð¾ 22)

---

### **Ð­Ð¢ÐÐŸ 2 (Ð§Ð•Ð Ð•Ð— 1 ÐœÐ•Ð¡Ð¯Ð¦): API Gateway**

**Ð¡Ñ€Ð¾Ðº:** 2-3 Ð½ÐµÐ´ÐµÐ»Ð¸

1. **Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Kong Gateway** Ð¸Ð»Ð¸ Nginx
2. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¼Ð°Ñ€ÑˆÑ€ÑƒÑ‚Ð¸Ð·Ð°Ñ†Ð¸ÑŽ
3. Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ rate limiting
4. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³

**ÐÑ€Ñ…Ð¸Ñ‚ÐµÐºÑ‚ÑƒÑ€Ð° Ð¿Ð¾ÑÐ»Ðµ Ð­Ñ‚Ð°Ð¿Ð° 2:**
```
Frontend â†’ Kong Gateway â†’ ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹
  (Shared UI)     â†“
              [Auth, Rate Limit, Monitoring]
```

**Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ:**

```bash
# 1. Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Kong
docker pull kong

# 2. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ kong.yml ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸ÑŽ:
services:
  - name: auth-service
    url: http://auth-server:8001
    routes:
      - paths: [/api/auth]
  
  - name: social-posts
    url: http://social-posts:8000
    routes:
      - paths: [/api/social/posts]
  
  # ... Ð´Ð»Ñ ÐºÐ°Ð¶Ð´Ð¾Ð³Ð¾ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°

# 3. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ñ‹:
# API_BASE_URL=http://localhost:8000 (Kong Gateway)
```

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:**
- âœ… Ð•Ð´Ð¸Ð½Ð°Ñ Ñ‚Ð¾Ñ‡ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° Ð´Ð»Ñ Ð²ÑÐµÑ… API
- âœ… Ð¦ÐµÐ½Ñ‚Ñ€Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð½Ð°Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ
- âœ… Rate limiting
- âœ… Ð›ÐµÐ³Ñ‡Ðµ Ð´ÐµÐ¿Ð»Ð¾Ð¸Ñ‚ÑŒ

---

### **Ð­Ð¢ÐÐŸ 3 (Ð§Ð•Ð Ð•Ð— 3-6 ÐœÐ•Ð¡Ð¯Ð¦Ð•Ð’): Shared Backend Utils**

**Ð¡Ñ€Ð¾Ðº:** 1-2 Ð¼ÐµÑÑÑ†Ð°

Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ **shared packages Ð´Ð»Ñ Ð±ÑÐºÐµÐ½Ð´Ð¾Ð²**:

```
shared/
â”œâ”€â”€ frontend/ (ÑƒÐ¶Ðµ ÐµÑÑ‚ÑŒ)
â”‚   â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ feature-flags/
â”‚   â””â”€â”€ types/
â””â”€â”€ backend/ (Ð½Ð¾Ð²Ð¾Ðµ)
    â”œâ”€â”€ auth-utils/
    â”œâ”€â”€ db-models/
    â”œâ”€â”€ api-clients/
    â””â”€â”€ common-middleware/
```

**Ð§Ñ‚Ð¾ Ð´ÐµÐ»Ð°Ñ‚ÑŒ:**

1. **Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ @tyrian/backend-auth**:
```python
# shared/backend/auth-utils/jwt_utils.py
def verify_jwt(token: str) -> dict:
    # ÐžÐ±Ñ‰Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸ JWT
    pass
```

2. **Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ @tyrian/backend-models**:
```python
# shared/backend/db-models/user.py
class User(BaseModel):
    id: UUID
    email: str
    # ÐžÐ±Ñ‰Ð°Ñ Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
```

3. **ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ðº Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ°Ð¼**:
```python
# Ð’ Ð»ÑŽÐ±Ð¾Ð¼ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐµ:
from tyrian_backend_auth import verify_jwt
from tyrian_backend_models import User
```

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:**
- âœ… ÐÐµÑ‚ Ð´ÑƒÐ±Ð»Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÐºÐ¾Ð´Ð° Ð² Ð±ÑÐºÐµÐ½Ð´Ð°Ñ…
- âœ… Ð•Ð´Ð¸Ð½Ñ‹Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…
- âœ… Ð•Ð´Ð¸Ð½Ð°Ñ Ð»Ð¾Ð³Ð¸ÐºÐ° Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸

---

### **Ð­Ð¢ÐÐŸ 4 (Ð§Ð•Ð Ð•Ð— 6-12 ÐœÐ•Ð¡Ð¯Ð¦Ð•Ð’): Nx Monorepo Ð´Ð»Ñ Ð²ÑÐµÐ³Ð¾**

**Ð¡Ñ€Ð¾Ðº:** 3-6 Ð¼ÐµÑÑÑ†ÐµÐ²

ÐŸÐµÑ€ÐµÐ¼ÐµÑÑ‚Ð¸Ñ‚ÑŒ **Ð’Ð¡Ð** Ð² Nx Ð¼Ð¾Ð½Ð¾Ñ€ÐµÐ¿Ð¾ (Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ C).

Ð¡Ð¼. `Ð“ÐžÐ¢ÐžÐ’ÐÐžÐ¡Ð¢Ð¬_Ðš_Ð’ÐÐ Ð˜ÐÐÐ¢Ð£_2.md` Ð´Ð»Ñ Ð´ÐµÑ‚Ð°Ð»ÐµÐ¹.

---

## ðŸ”§ **ÐšÐžÐÐšÐ Ð•Ð¢ÐÐ«Ð• Ð¨ÐÐ“Ð˜ Ð”Ð›Ð¯ Ð­Ð¢ÐÐŸÐ 1 (Ð¡Ð•Ð™Ð§ÐÐ¡)**

### **Ð¨ÐÐ“ 1: Ð£Ð½Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Auth Server (3-5 Ð´Ð½ÐµÐ¹)**

#### **1.1. ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ AXA-auth-server-main**

```bash
cd AXA-auth-server-main

# ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ settings.py:
ALLOWED_HOSTS = [
    'localhost',
    '127.0.0.1',
    'tyriantrade.ngrok.pro',  # Ð²Ð°Ñˆ Ð´Ð¾Ð¼ÐµÐ½
]

# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ CORS Ð´Ð»Ñ Ð²ÑÐµÑ… Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð¾Ð²:
CORS_ALLOWED_ORIGINS = [
    'http://localhost:3000',  # Marketplace
    'http://localhost:3001',  # Social
    'http://localhost:3002',  # Crypto
    'http://localhost:3003',  # Stocks
    'http://localhost:3004',  # Stream
    'http://localhost:3005',  # AI
    'http://localhost:5173',  # Portfolios
]

# ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ SESSION_COOKIE_DOMAIN:
SESSION_COOKIE_DOMAIN = 'localhost'  # Ð´Ð»Ñ dev
# SESSION_COOKIE_DOMAIN = '.tyriantrade.com'  # Ð´Ð»Ñ production
```

#### **1.2. ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ñ‹**

Ð’ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ð¿Ñ€Ð¾ÐµÐºÑ‚Ðµ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ `src/api/auth.ts`:

```typescript
// shared/packages/api/src/auth.ts
const AUTH_BASE_URL = process.env.NEXT_PUBLIC_AUTH_URL || 'http://localhost:8001';

export async function login(email: string, password: string) {
  const res = await fetch(`${AUTH_BASE_URL}/api/accounts/login/`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ email, password }),
    credentials: 'include', // Ð’ÐÐ–ÐÐž Ð´Ð»Ñ cookies!
  });
  return res.json();
}

export async function getProfile() {
  const res = await fetch(`${AUTH_BASE_URL}/api/accounts/profile/`, {
    credentials: 'include',
  });
  return res.json();
}

export async function logout() {
  const res = await fetch(`${AUTH_BASE_URL}/api/accounts/logout/`, {
    method: 'POST',
    credentials: 'include',
  });
  return res.json();
}
```

#### **1.3. Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ shared API client package**

```bash
cd shared/packages
mkdir -p api/src
cd api

# package.json:
cat > package.json << 'EOF'
{
  "name": "@tyrian/api",
  "version": "1.0.0",
  "main": "./src/index.ts",
  "dependencies": {
    "axios": "^1.6.0"
  }
}
EOF

# src/index.ts:
cat > src/index.ts << 'EOF'
export * from './auth';
export * from './config';
EOF
```

#### **1.4. ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ Ðº Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ð°Ð¼**

```bash
# Ð’ ÐºÐ°Ð¶Ð´Ð¾Ð¼ Ñ„Ñ€Ð¾Ð½Ñ‚ÐµÐ½Ð´Ðµ:
cd AXA-marketplace-main
npm pkg set dependencies.@tyrian/api='file:../shared/packages/api'
npm install
```

**Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ð½Ð¸Ðµ:**

```typescript
// Ð’ Ð»ÑŽÐ±Ð¾Ð¼ ÐºÐ¾Ð¼Ð¿Ð¾Ð½ÐµÐ½Ñ‚Ðµ:
import { login, getProfile, logout } from '@tyrian/api';

async function handleLogin() {
  const user = await login(email, password);
  console.log('Logged in:', user);
}
```

---

### **Ð¨ÐÐ“ 2: ÐÐ°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹ Social Network (1 Ð½ÐµÐ´ÐµÐ»Ñ)**

**ÐŸÑ€Ð¾Ð±Ð»ÐµÐ¼Ð°:** Ð£ Social Network 7 Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ñ… Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð².

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** API Gateway Ð¿ÐµÑ€ÐµÐ´ Ð½Ð¸Ð¼Ð¸.

#### **2.1. Docker Compose Ð´Ð»Ñ Ð²ÑÐµÑ… Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²**

Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ `docker-compose.all-social.yml`:

```yaml
version: '3.8'

services:
  # API Gateway (Nginx)
  gateway:
    image: nginx:alpine
    ports:
      - "8080:80"
    volumes:
      - ./nginx-social.conf:/etc/nginx/nginx.conf
    depends_on:
      - posts
      - profiles
      - likes
      - favorites
      - subscriptions
      - notifications
      - mail

  # ÐœÐ¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹
  posts:
    build: ./AXA-socialweb-posts-main
    expose:
      - "8000"
  
  profiles:
    build: ./AXA-socialweb-profiles-main
    expose:
      - "8000"
  
  # ... Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ
```

#### **2.2. Nginx ÐºÐ¾Ð½Ñ„Ð¸Ð³ÑƒÑ€Ð°Ñ†Ð¸Ñ**

```nginx
http {
  upstream posts_backend {
    server posts:8000;
  }
  
  upstream profiles_backend {
    server profiles:8000;
  }
  
  server {
    listen 80;
    
    location /api/social/posts/ {
      proxy_pass http://posts_backend/;
    }
    
    location /api/social/profiles/ {
      proxy_pass http://profiles_backend/;
    }
    
    # ... Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ
  }
}
```

#### **2.3. Ð—Ð°Ð¿ÑƒÑÐº**

```bash
docker-compose -f docker-compose.all-social.yml up -d
```

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:**
- âœ… Ð’ÑÐµ Ð¼Ð¸ÐºÑ€Ð¾ÑÐµÑ€Ð²Ð¸ÑÑ‹ Social Network Ð·Ð° Ð¾Ð´Ð½Ð¸Ð¼ Ð¿Ð¾Ñ€Ñ‚Ð¾Ð¼ (8080)
- âœ… Frontend Ð¾Ð±Ñ€Ð°Ñ‰Ð°ÐµÑ‚ÑÑ Ðº `localhost:8080/api/social/*`

---

## ðŸ“Š **Ð˜Ð¢ÐžÐ“ÐžÐ’ÐÐ¯ ÐÐ Ð¥Ð˜Ð¢Ð•ÐšÐ¢Ð£Ð Ð ÐŸÐžÐ¡Ð›Ð• Ð­Ð¢ÐÐŸÐ 1**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FRONTEND (7 Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð¾Ð²)                   â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚Marketplace â”‚ â”‚  Social    â”‚ â”‚   Crypto   â”‚ ...         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚        â”‚              â”‚              â”‚                      â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚                       â”‚                                     â”‚
â”‚                @tyrian/ui, @tyrian/feature-flags           â”‚
â”‚                @tyrian/api â† ÐÐžÐ’ÐžÐ•!                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚     AXA-auth-server-main      â”‚ â† Ð•Ð´Ð¸Ð½Ñ‹Ð¹ Auth!
        â”‚         (Django)              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Social       â”‚ â”‚ Crypto       â”‚ â”‚ Streaming    â”‚
â”‚ Microservicesâ”‚ â”‚ Microservicesâ”‚ â”‚ Microservicesâ”‚
â”‚ (7 services) â”‚ â”‚ (2 services) â”‚ â”‚ (8 services) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸŽ¯ **Ð§Ð¢Ðž Ð”Ð•Ð›ÐÐ¢Ð¬ Ð”ÐÐ›Ð¬Ð¨Ð•?**

### **Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¾Ð´Ð¸Ð½ Ð¸Ð· Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð²:**

1. **"ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ Ð­Ñ‚Ð°Ð¿Ð° 1"** - ÑƒÐ½Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Auth Server
2. **"Ð¡Ñ€Ð°Ð·Ñƒ Ð´ÐµÐ»Ð°Ñ‚ÑŒ API Gateway"** - Ð±Ð¾Ð»ÐµÐµ Ð±Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ
3. **"Ð¥Ð¾Ñ‡Ñƒ Nx Ð´Ð»Ñ Ð²ÑÐµÐ³Ð¾"** - Ð´Ð¾Ð»Ð³Ð¾ Ð½Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾
4. **"ÐžÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ ÐºÐ°Ðº ÐµÑÑ‚ÑŒ"** - Ð¿Ð¾ÐºÐ° Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

**ÐœÐ¾Ð¹ ÑÐ¾Ð²ÐµÑ‚:**  
ðŸ‘‰ **ÐÐ°Ñ‡Ð½Ð¸Ñ‚Ðµ Ñ Ð­Ñ‚Ð°Ð¿Ð° 1** (ÑƒÐ½Ð¸Ñ„Ð¸ÐºÐ°Ñ†Ð¸Ñ Auth) - ÑÑ‚Ð¾ Ð±Ñ‹ÑÑ‚Ñ€Ð¾ (1-2 Ð½ÐµÐ´ÐµÐ»Ð¸) Ð¸ Ð´Ð°ÑÑ‚ Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚!

---

**Ð“Ð¾Ñ‚Ð¾Ð² Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ñ Ð»ÑŽÐ±Ñ‹Ð¼ Ð¸Ð· ÑÑ‚Ð°Ð¿Ð¾Ð²! Ð§Ñ‚Ð¾ Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÐµÑ‚Ðµ?** ðŸš€

